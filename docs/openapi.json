{"openapi":"3.0.0","info":{"title":"Cunner","version":"1.0.0","description":"API to manage code snippets, run them, and inspect the output:\n\nThis API aims to provide an easy way to run your code snippets in a remote machine, without having to install anything. It provides an API for both the user to create, run, read, update, or delete snippets, and for the Admin of the application to support/unsupport different languages and versions."},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","description":"To get a token, use the /auth/login endpoint"}},"schemas":{}},"paths":{"/snippets/":{"post":{"tags":["Snippets"],"description":"Create a new snippet","requestBody":{"content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"language":{"type":"string"},"version":{"type":"string"},"code":{"type":"string","minLength":3}},"required":["language","version","code"]}}},"required":true},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{"result":{}},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3},"_id":{"type":"string"},"result":{"type":"object","default":{},"properties":{"stdout":{"type":"string"},"stderr":{"type":"string"},"exitCode":{"type":"number"}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}},"get":{"tags":["Snippets"],"description":"Get all snippets created by the logged in user","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","default":{"result":{}},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3},"_id":{"type":"string"},"result":{"type":"object","default":{},"properties":{"stdout":{"type":"string"},"stderr":{"type":"string"},"exitCode":{"type":"number"}}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/snippets/{id}":{"get":{"tags":["Snippets"],"description":"Get a single snippet details by id","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{"result":{}},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3},"_id":{"type":"string"},"result":{"type":"object","default":{},"properties":{"stdout":{"type":"string"},"stderr":{"type":"string"},"exitCode":{"type":"number"}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}},"patch":{"tags":["Snippets"],"description":"Update a snippet by id","requestBody":{"content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3}}}}}},"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{"result":{}},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3},"_id":{"type":"string"},"result":{"type":"object","default":{},"properties":{"stdout":{"type":"string"},"stderr":{"type":"string"},"exitCode":{"type":"number"}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}},"delete":{"tags":["Snippets"],"description":"Delete a snippet by id","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object"}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/snippets/{id}/run":{"get":{"tags":["Snippets"],"description":"Run a snippet by id","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{"result":{}},"properties":{"version":{"type":"string"},"language":{"type":"string"},"code":{"type":"string","minLength":3},"_id":{"type":"string"},"result":{"type":"object","default":{},"properties":{"stdout":{"type":"string"},"stderr":{"type":"string"},"exitCode":{"type":"number"}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/languages/":{"get":{"tags":["Languages"],"description":"Get all supported languages","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}}}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}},"post":{"tags":["Admin"],"description":"Add and support a new language:\n\n- **name** should be a valid Docker image that can be pulled from Docker hub\n- **versions** is an array of valid Docker tags for the chosen image\n- **cmd**: is an array represents the command to run a `SOURCE_FILE` written in that language\n\nExample request body:\n\n```json\n{\n  \"name\": \"python\",\n  \"versions\": [\"latest\"],\n  \"cmd\": [\"python\", \"SOURCE_FILE\"]\n}\n```\n\nNotice the `SOURCE_FILE` this is a placeholder for the actual file name, it will be automatically replaced by the actual file name when running the code","requestBody":{"content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"cmd":{"type":"array","items":{"type":"string"},"minItems":1}},"required":["name","versions","cmd"]}}},"required":true},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/languages/{name}":{"get":{"tags":["Languages"],"description":"Get language details by name","parameters":[{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}}}},"delete":{"tags":["Admin"],"description":"Delete a language, and all its versions","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/languages/{name}/{version}":{"post":{"tags":["Admin"],"description":"Add a new version to a language","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"name","required":true},{"schema":{"type":"string"},"in":"path","name":"version","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}},"delete":{"tags":["Admin"],"description":"Delete a version of a language","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"name","required":true},{"schema":{"type":"string"},"in":"path","name":"version","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/languages/{name}/cmd":{"put":{"tags":["Admin"],"description":"Update the command used for running code snippets","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"},"minItems":1}}}},"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string"},"versions":{"type":"array","items":{"type":"string"}},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"description":"Login and get a session token\n\nTo use the token, add it to the `Authorization` header, prefixed with `Bearer `","requestBody":{"content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":8}},"required":["email","password"]}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"token":{"type":"string"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/auth/register":{"post":{"tags":["Auth"],"description":"Create a new user account","requestBody":{"content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"name":{"type":"string","minLength":1},"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":8}},"required":["name","email","password"]}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"email":{"type":"string"},"name":{"type":"string"},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/auth/me":{"get":{"tags":["Auth"],"description":"Get the current logged in user:\n\n- **Requires Authentication**","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"email":{"type":"string"},"name":{"type":"string"},"created":{"type":"string","format":"date-time"},"updated":{"type":"string","format":"date-time"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}},"/auth/logout":{"delete":{"tags":["Auth"],"description":"Logout and invalidate the current session:\n\n- **Requires Authentication**","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"message":{"type":"string"}}}}}},"default":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","default":{},"properties":{"error":{"type":"string"},"statusCode":{"type":"number"},"message":{"type":"string"}}}}}}}}}},"servers":[{"url":"http://localhost:3000"}],"tags":[{"name":"Auth","description":"Authentication and session management:\n\nMost of the api end point requires authentication, to authenticate you need to `POST /auth/login` and you need an account to login with `POST /auth/register`\n\n**There is a special accout \"The Admin\"**\n\nIn the `.env` file you can specify the email and password for that account. this will allow you to manipulate the `/languages`"},{"name":"Languages","description":"Discover the available languages:\n\nThis two routes are puplic and does not require authentication"},{"name":"Snippets","description":"CRUD operations for code snippets:\n\nUsers can store, run, inspect their snippets.\n\n- **Requires Authentication**\n- **Requires the authenticated user to be the owner of the snippet**"},{"name":"Admin","description":"Admin can do everything mensioned above, in addition, they can manipulate the supported languages and versions by the application\n\n- **Requires Authentication**\n- **Requires the authenticated user to be an Admin**\n\nYou can specify the email and password for the admin in the `.env` file"}]}